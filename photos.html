---
layout: page
title: Photos
permalink: /photos/
---

<style>
.collection { margin: 1.25rem 0 2.2rem; }
.collection h2 { margin: 0 0 .35rem; font-size: 1.25rem; }

.rail{
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: minmax(150px, 190px);
  gap: 12px;

  overflow-x: auto;
  overscroll-behavior-x: contain;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;

  padding: 10px 6px 14px;
  border: 1px solid rgba(0,0,0,.10);
  border-radius: 14px;
  background: rgba(0,0,0,.02);
}
.rail::-webkit-scrollbar{ height: 10px; }
.rail::-webkit-scrollbar-thumb{ background: rgba(0,0,0,.18); border-radius: 999px; }
.rail::-webkit-scrollbar-track{ background: transparent; }

.card{
  scroll-snap-align: start;
  display: block;
  text-decoration: none;
  color: inherit;
  border-radius: 12px;
  overflow: hidden;
  border: 1px solid rgba(0,0,0,.10);
  background: #fff;
}
.card img{
  width: 100%;
  aspect-ratio: 4 / 3;
  object-fit: cover;
  display: block;
}

@media (max-width: 520px){
  .rail{ grid-auto-columns: minmax(160px, 75vw); }
}
</style>

<p style="opacity:.75; margin-top:0;">
Scroll horizontally within each collection. Click a thumbnail to open the original image file.
</p>

{% assign base = "/assets/photos/" %}

{% assign all = site.static_files | where_exp: "f", "f.path contains base" %}

{%- comment -%}
收集分类名：从 /assets/photos/<folder>/xxx.jpg 中提取 <folder>
{%- endcomment -%}
{% assign folders = "" | split: "|" %}
{% for f in all %}
  {% assign ext = f.extname | downcase %}
  {% if ext == ".jpg" or ext == ".jpeg" or ext == ".png" or ext == ".webp" or ext == ".gif" %}
    {% assign p = f.path | remove_first: base %}
    {% assign parts = p | split: "/" %}
    {% assign folder = parts[0] %}
    {% if folder != "" and folder != "_thumb" %}
      {% unless folders contains folder %}
        {% assign folders = folders | push: folder %}
      {% endunless %}
    {% endif %}
  {% endif %}
{% endfor %}

{% assign folders = folders | sort %}

{% if folders.size == 0 %}
  <p style="opacity:.65;">
    No images found under <code>{{ base }}</code>. Create a folder like
    <code>/assets/photos/nature/</code> and upload JPG/PNG/WEBP images.
  </p>
{% endif %}

{% for folder in folders %}
  {% assign prefix = base | append: folder | append: "/" %}
  {% assign items = all | where_exp: "f", "f.path contains prefix" | sort: "name" %}

  <section class="collection">
    <h2>{{ folder | replace: "-", " " | capitalize }}</h2>

    <div class="rail" aria-label="{{ folder }} collection">
      {% assign shown = 0 %}
      {% for f in items %}
        {% assign ext = f.extname | downcase %}
        {% if ext == ".jpg" or ext == ".jpeg" or ext == ".png" or ext == ".webp" or ext == ".gif" %}
          {%- comment -%}
          缩略图路径：/assets/photos/_thumb/<folder>/<same-name>.jpg
          若不存在，则 onerror 回退到原图
          {%- endcomment -%}
          {% assign rel = f.path | remove_first: base %}  {# e.g. nature/IMG_0001.JPG #}
          {% assign thumb = "/assets/photos/_thumb/" | append: rel %}
          {% assign thumb = thumb | replace: ".JPG", ".jpg" | replace: ".JPEG", ".jpg" | replace: ".PNG", ".jpg" | replace: ".WEBP", ".jpg" | replace: ".GIF", ".jpg" %}

          {% if shown < 60 %}
            <a class="card" href="{{ f.path | relative_url }}" target="_blank" rel="noopener">
              <img
                src="{{ thumb | relative_url }}"
                alt=""
                loading="lazy"
                decoding="async"
                fetchpriority="low"
                onerror="this.onerror=null;this.src='{{ f.path | relative_url }}';"
              >
            </a>
            {% assign shown = shown | plus: 1 %}
          {% endif %}
        {% endif %}
      {% endfor %}
    </div>
  </section>
{% endfor %}
